using System;
using System.Collections.Generic;
using System.IO;
using UnityEngine;
using System.Linq;
using System.Text;
using System.Web.WebPages;
using UnhollowerBaseLib;

namespace MOD_kqAfiU
{
    public class Prop
    {
        private static string outPath = "out.txt";
        public static Dictionary<string, string> luckDict = new Dictionary<string, string>()
        {
            { "5001", "武神加持（作用：增加10%攻击）" },
            { "5002", "灵珠子（作用：增加10%最大灵力）" },
            { "5003", "战神加持（作用：增加10%防御）" },
            { "5004", "炼体高人（作用：增加10%最大体力）" },
            { "5005", "传承之刀（作用：增加10%的刀资质）" },
            { "5006", "踏风之躯（作用：增加10%的移动速度）" },
            { "5007", "战魂加持（作用：增加10点物理免伤）" },
            { "5017", "并赃拿贼 （作用：幸运+10.持续12个月）" },
            { "5022", "后发制人（作用：每月心情+20，持续6个月）" },
            { "5025", "以暴制暴（作用：幸运+10，每月心情+20，持续6个月）" },
            { "5026", "复仇者（作用：每月心情+20，持续6个月）" },
            { "5029", "高抬贵手（作用：幸运+10.持续6个月）" },
            { "5031", "能屈能伸（作用：幸运+20.持续6个月）" },
            { "5032", "手有余香（作用：幸运+20，每月心情+10，持续12个月）" },
            { "5034", "仙人庇护（作用：体力、灵力、念力+10%，所有灵根资质+10，持续12个月）" },
            { "5036", "金刚之躯（作用：体力上限+10%，持续12个月）" },
            { "5037", "凝神静气（作用：灵力上限+10%，持续12个月）" },
            { "5038", "青龙庇护（作用：攻击+10%，持续12个月）" },
            { "5039", "白虎庇护（作用：会心+20，持续12个月）" },
            { "5040", "朱雀庇护（作用：全灵根+10，持续12个月）" },
            { "5041", "玄武庇护（作用：防御+10%，持续12个月）" },
            { "5042", "穷儿乍富（作用：灵石+5000。幸运+10，持续12个月）" },
            { "5043", "琳琅满目（作用：随机获得药材。幸运+10，持续12个月）" },
            { "5044", "云中宫阙（作用：随机功法、丹药、法宝。幸运+10，持续12个月）" },
            { "5045", "驱雷掣电（作用：雷灵根+10，持续12个月）" },
            { "5047", "破阵者（作用：攻击+5%，全灵根+5，持续12个月）" },
            { "5048", "剑气纵横（作用：剑法资质+5，持续12个月）" },
            { "5049", "修罗绝刀（作用：刀法资质+5，持续12个月）" },
            { "5050", "翻云覆雨枪（作用：枪法资质+5，持续12个月）" },
            { "5051", "雪窖冰天（作用：水灵根+5，持续12个月）" },
            { "5052", "冰魂雪魄（作用：水灵根+10，持续12个月）" },
            { "5053", "恽砚峥土（作用：土灵根+5，持续12个月）" },
            { "5054", "垦尘冥土（作用：土灵根+10，持续12个月）" },
            { "5055", "苍藤古木（作用：木灵根+5，持续12个月）" },
            { "5056", "森罗万象（作用：木灵根+10，持续12个月）" },
            { "5057", "星星之火（作用：火灵根+5，持续12个月）" },
            { "5058", "星火燎原（作用：火灵根+10，持续12个月）" },
            { "5059", "雷惊电绕（作用：雷灵根+5，持续12个月）" },
            { "5060", "雷嗔电怒（作用：雷灵根+10，持续12个月）" },
            { "5061", "风起云涌（作用：风灵根+5，持续12个月）" },
            { "5062", "残云悲风（作用：风灵根+10，持续12个月）" },
            { "5080", "得见先神（作用：增加30悟性，持续3个月）" },
            { "5082", "礼敬上仙（作用：幸运+20，脚程+100，持续3个月）" },
            { "5085", "三生石祝福（作用：幸运+30，脚程+200，持续24个月）" },
            { "8001", "力大无穷（作用：攻击力+6）" },
            { "8002", "热血沸腾（作用：体力上限+100）" },
            { "8003", "森罗万象（作用：灵力上限+100）" },
            { "8004", "提神醒脑（作用：念力上限+100）" },
            { "8005", "强身健体（作用：防御力+6）" },
            { "8006", "神元化煞（作用：会心+20）" },
            { "8007", "钢筋铁骨（作用：护心+20）" },
            { "8008", "波澜不惊（作用：每个月恢复体力200）" },
            { "8009", "川流不息（作用：每个月恢复灵力200）" },
            { "8010", "静以修身（作用：每个月恢复念力100）" },
            { "8011", "精力充沛（作用：精力上限+10，每个月恢复精力10。）" },
            { "8012", "仁者乐山（作用：心情上限+10，每个月恢复心情5。）" },
            { "8013", "身轻如燕（作用：移动速度+15，脚力+400。）" },
            { "8021", "力大无穷（作用：攻击力+24）" },
            { "8022", "热血沸腾（作用：体力上限+500）" },
            { "8023", "森罗万象（作用：灵力上限+250）" },
            { "8024", "提神醒脑（作用：念力上限+250）" },
            { "8025", "强身健体（作用：防御力+24）" },
            { "8026", "神元化煞（作用：会心+65）" },
            { "8027", "钢筋铁骨（作用：护心+65）" },
            { "8028", "波澜不惊（作用：每个月恢复体力1000）" },
            { "8029", "川流不息（作用：每个月恢复灵力500）" },
            { "8030", "静以修身（作用：每个月恢复念力250）" },
            { "8031", "精力充沛（作用：精力上限+20，每个月恢复精力20。）" },
            { "8032", "仁者乐山（作用：心情上限+20，每个月恢复心情10。）" },
            { "8033", "身轻如燕（作用：移动速度+25，脚力+700。）" },
            { "8041", "力大无穷（作用：攻击力+85）" },
            { "8042", "热血沸腾（作用：体力上限+2000）" },
            { "8043", "森罗万象（作用：灵力上限+800）" },
            { "8044", "提神醒脑（作用：念力上限+800）" },
            { "8045", "强身健体（作用：防御力+87）" },
            { "8046", "神元化煞（作用：会心+200）" },
            { "8047", "钢筋铁骨（作用：护心+200）" },
            { "8048", "波澜不惊（作用：每个月恢复体力4000）" },
            { "8049", "川流不息（作用：每个月恢复灵力1600）" },
            { "8050", "静以修身（作用：每个月恢复念力800）" },
            { "8051", "精力充沛（作用：精力上限+30，每个月恢复精力30。）" },
            { "8052", "仁者乐山（作用：心情上限+30，每个月恢复心情15。）" },
            { "8053", "身轻如燕（作用：移动速度+35，脚力+1000。）" },
            { "8061", "力大无穷（作用：攻击力+320）" },
            { "8062", "热血沸腾（作用：体力上限+7000）" },
            { "8063", "森罗万象（作用：灵力上限+1200）" },
            { "8064", "提神醒脑（作用：念力上限+1200）" },
            { "8065", "强身健体（作用：防御力+317）" },
            { "8066", "神元化煞（作用：会心+700）" },
            { "8067", "钢筋铁骨（作用：护心+700）" },
            { "8068", "波澜不惊（作用：每个月恢复体力14000）" },
            { "8069", "川流不息（作用：每个月恢复灵力2400）" },
            { "8070", "静以修身（作用：每个月恢复念力1200）" },
            { "8071", "精力充沛（作用：精力上限+40，每个月恢复精力40。）" },
            { "8072", "仁者乐山（作用：心情上限+40，每个月恢复心情20。）" },
            { "8073", "身轻如燕（作用：移动速度+45，脚力+1250。）" },
            { "8081", "力大无穷（作用：攻击力+1150）" },
            { "8082", "热血沸腾（作用：体力上限+25000）" },
            { "8083", "森罗万象（作用：灵力上限+3000）" },
            { "8084", "提神醒脑（作用：念力上限+3000）" },
            { "8085", "强身健体（作用：防御力+1146）" },
            { "8086", "神元化煞（作用：会心+2200）" },
            { "8087", "钢筋铁骨（作用：护心+2200）" },
            { "8088", "波澜不惊（作用：每个月恢复体力50000）" },
            { "8089", "川流不息（作用：每个月恢复灵力6000）" },
            { "8090", "静以修身（作用：每个月恢复念力3000）" },
            { "8091", "精力充沛（作用：精力上限+50，每个月恢复精力50。）" },
            { "8092", "仁者乐山（作用：心情上限+50，每个月恢复心情25。）" },
            { "8093", "身轻如燕（作用：移动速度+55，脚力+1500。）" },
            { "9081", "疾风护盾（作用：每次使用身法时，可获得200点护盾，持续5秒）" },
            { "9082", "疾风护盾（作用：每次使用身法时，可获得400点护盾，持续5秒）" },
            { "9083", "疾风护盾（作用：每次使用身法时，可获得600点护盾，持续5秒）" },
            { "9084", "疾风护盾（作用：每次使用身法时，可获得800点护盾，持续5秒）" },
            { "9085", "疾风护盾（作用：每次使用身法时，可获得1000点护盾，持续5秒）" },
            { "9086", "疾风护盾（作用：每次使用身法时，可获得1200点护盾，持续5秒）" },
            { "9099", "伏羲战舞（作用：增加20%攻击和防御）" },
            { "9100", "月枝（作用：增加20%修炼速度）" },
            { "9101", "魔猿血（作用：增加20%攻击和防御）" },
            { "9102", "莫雪馈赠（作用：增加15%幸运）" },
            { "9103", "警惕（作用：增加20%护心）" },
            { "9105", "店主的歉意（作用：购物8折优惠）" },
            { "9108", "冉遗气息（作用：每月恢复20点心情）" },
            { "9109", "狐妖祝福（作用：增加25点幸运）" },
            { "9110", "狂暴（作用：增加100暴击倍数）" },
            { "9111", "无畏（作用：增加10%攻击）" },
            { "9113", "鹿蜀的青睐（作用：增加20点幸运）" },
            { "9115", "谨慎（作用：增加10%护心）" },
            { "9117", "河神的祝福（作用：增加10点幸运，且每月恢复10%体力和健康。）" },
            { "9118", "品德高尚（作用：增加5点幸运和10%的护心。）" },
            { "9119", "祭神（作用：增加5点幸运。）" },
            { "9120", "祭神（作用：增加10点幸运。）" },
            { "9121", "怪鸟之羽（作用：增加10%灵根抗性）" },
            { "9122", "月痕（作用：增加10%修炼效率）" },
            { "9123", "狌狌之灵（作用：增加200脚力和20点移速）" },
            { "9124", "狌狌之气（作用：增加200脚力）" },
            { "9125", "上签（作用：增加20点幸运）" },
            { "9139", "仙酒（作用：增加10%攻击及10点幸运）" },
            { "9140", "仙酒（作用：增加10%防御及10点幸运）" },
            { "9141", "仙酒（作用：增加10%会心及10点幸运）" },
            { "9142", "仙酒（作用：增加100暴击倍数及10点幸运）" },
            { "9150", "思维清晰（作用：增加20点悟性）" },
            { "9152", "感悟（作用：增加20点悟性和10%修炼效率）" },
            { "9153", "小醉（作用：增加5%攻击）" },
            { "9154", "微醺（作用：增加5%体力和10%会心）" },
            { "9155", "幸运草（作用：增加20点幸运）" },
            { "9159", "气血饱满（作用：增加体力上限5%）" },
            { "9163", "求知（作用：增加10点悟性）" },
            { "9164", "勿知（作用：每月心情+10）" },
            { "9165", "寻道（作用：增加5%攻击及10点悟性）" },
            { "9166", "勿求（作用：增加5%防御及10点幸运）" },
            { "9167", "人生无常（作用：增加5点悟性及100脚力）" },
            { "9172", "棋局迷思（作用：悟性提高40点，修炼速度提高50%）" },
            { "20001", "杀伐果断（作用：增加一倍暴击伤害，增加10%攻击力）" },
            { "6104001", "牛气冲天（作用：幸运+20）" },
            { "6114191", "招魂幡 （作用：战斗中濒死时可无敌5秒，一场战斗只可触发一次，总共可触发3次，次数用完后气运消失。" },
            { "6114221", "玲珑灯魂（作用：战斗中濒死时立即回复全部体力灵力和念力，只可触发一次，触发后气运消失。）" },
            { "6120001", "御鬼幡（作用：体力低于20%时触发，召唤4个鬼将，其中一个带有特技每隔5秒回复玩家最大生命值的5%。一场战斗只能触发一次，总共能触发3次，次数用完后气运消失。（已使用次数：{luckUseCount}/3））" },
            { "6120002", "天剑石（作用：使用神通之后过一段时间，可在场上召唤一道天剑对所有敌人造成高伤害。一场战斗只能触发一次，总共能触发9次，次数用完后气运消失。（已使用次数：{luckUseCount}/9））" },
            { "6120003", "破损的御鬼幡（作用：一面破损的御鬼幡，但还是保留了它的部分力量。体力低于20%时触发，召唤2个鬼将。一场战斗只能触发一次，总共能触发2次，次数用完后气运消失。（已使用次数：{luckUseCount}/2））" },
            { "6120004", "破损的天剑石（作用：一块破损的天剑石，但还是保留了它的部分力量。使用神通之后过一段时间，可在场上召唤一道天剑对所有敌人造成伤害。一场战斗只能触发一次，总共能触发3次，次数用完后气运消失。（已使用次数：{luckUseCount}/3））" },
            { "6120411", "御鬼幡（作用：体力低于20%时触发，召唤3个骷髅，其中一个带有特技每隔5秒回复玩家最大生命值的5%。一场战斗只能触发一次，总共能触发3次，次数用完后气运消失。（已使用次数：{luckUseCount}/3））" },
            { "6121371", "九言镇灵咒（作用：在战斗中遇到大妖兽及一些较强力的敌人时9秒后对所有敌人造成伤害并在之后的5秒内沉默敌人并造成小额伤害，一场战斗只可触发一次，总共可触发9次，次数用完后气运消失。（已使用次数：{luckUseCount}/9））" },
            { "8800311", "御力之道（作用：拳法资质+100,掌法资质+100,指法资质+100）" },
            { "8805215", "解脱药效（作用：不想师兄秘药竟然有强健身体之功，体内气息流转，分外顺畅。体力上限+100）" },
            { "8805216", "沧溟镜像（作用：灵台倒置，尽倾烦恼，海镜窥心，息疑澄虑，进入内视境界，遍观内腑。悟性+25）" },
            { "8805217", "心情振作（作用：你得到门人尊敬，精神大振，举手抬足，都是自信。心情上限+50，每个月恢复心情+5）" },
            { "8805218", "小酌怡情（作用：增加体力5%体力上限，5%念力上限）" },
            { "8805219", "开怀畅饮（作用：增加10%体力上限，10%念力上限）" },
            { "8805220", "千杯不醉（作用：增加15%体力上限，15%念力上限）" },
            { "8805221", "神兽精神（作用：精力上限+30，健康上限+30，脚力+100）" },
            { "8805222", "神兽福气（作用：幸运+60,悟性+30）" },
            { "8805300", "凝心（作用：增加10%体力上限，10%念力上限）" },
            { "8805301", "固神（作用：增加15%体力上限，15%念力上限）" },
            { "8805353", "入神（作用：体力最大值+15%；灵力最大值+10%）" },
            { "8805354", "坐照（作用：体力最大值+15%；念力最大值+10%）" },
            { "8805356", "灵谷漱腑（作用：体力上限+5%）" },
            { "8805357", "丹铅洗脉（作用：体力上限+6%，灵力上限+5%）" },
            { "8805360", "异香振体（作用：体力上限增加5%，灵力上限增加10%）" },
            { "8805361", "表里荣卫（作用：体力上限增加5%，灵力上限增加3%）" },
            { "8805362", "龙虎交汇（作用：体力上限增加3%，灵力上限增加2%）" },
            { "8805363", "灵果通气（作用：似桃非桃，似李非李，表面光亮如镜，几可鉴人。而果子周围灵气缭绕，说是仙果，并不过分。）" },
            { "8805500", "丹心极意（作用：体力上限+2%；怀有该气运时进行突破能获得炼丹师特殊逆天改命。）" },
            { "8805505", "重瞳之力（作用：体力上限+3%）" },
            { "8805506", "羽焰阳炎（作用：体力上限+5%，灵力上限+3%）" },
            { "8805510", "冰岚温流（作用：体力上限+5%）" },
            { "8805511", "椿寿绵长（作用：体力上限增加15%，灵力上限增加10%，持续12个月；）" },
            { "9200001", "神秘剑气（作用：剑资质+20。有一团剑气围绕在你身边。）" },
            { "9200008", "瑶姬花香（作用：幸运+20，持续3个月）" }
};
        // 字典1: 丹药类物品，数量固定为1
        public static Dictionary<string, string> propDict1 = new Dictionary<string, string>()
{
    { "1011845", "聚气丸" },
    { "1011855", "集气丸" },
    { "1011865", "洗髓丸" },
    { "1011875", "涤髓丸" },
    { "1011885", "煅体丸" },
    { "1011895", "炼体丸" },
    { "1011905", "通脉丸" },
    { "1011915", "顺脉丸" },
    { "1011925", "融灵丸" },
    { "1011935", "合灵丸" },
    { "1011945", "蕴血丸" },
    { "1011955", "蓄血丸" },
    { "1011965", "凝神丸" },
    { "1011975", "结神丸" },
    { "1011985", "回元丸" },
    { "1011995", "升元丸" },
    { "1012005", "培魂丸" },
    { "1012015", "养魂丸" },
    { "1012025", "精魄丸" },
    { "1012035", "灵魄丸" },
    { "1011101", "六品聚气丹" },
    { "1011102", "五品聚气丹" },
    { "1011103", "四品聚气丹" },
    { "1011104", "三品聚气丹" },
    { "1011105", "二品聚气丹" },
    { "1011106", "一品聚气丹" },
    { "1011461", "六品筑基丹" },
    { "1011462", "五品筑基丹" },
    { "1011463", "四品筑基丹" },
    { "1011464", "三品筑基丹" },
    { "1011465", "二品筑基丹" },
    { "1011466", "一品筑基丹" },
    { "1011471", "六品化晶丹" },
    { "1011472", "五品化晶丹" },
    { "1011473", "四品化晶丹" },
    { "1011474", "三品化晶丹" },
    { "1011475", "二品化晶丹" },
    { "1011476", "一品化晶丹" },
    { "1011511", "六品聚灵丹" },
    { "1011512", "五品聚灵丹" },
    { "1011513", "四品聚灵丹" },
    { "1011514", "三品聚灵丹" },
    { "1011515", "二品聚灵丹" },
    { "1011516", "一品聚灵丹" },
    { "1011551", "六品化灵丹" },
    { "1011552", "五品化灵丹" },
    { "1011553", "四品化灵丹" },
    { "1011554", "三品化灵丹" },
    { "1011555", "二品化灵丹" },
    { "1011556", "一品化灵丹" },
    { "1011571", "六品破茧丹" },
    { "1011572", "五品破茧丹" },
    { "1011573", "四品破茧丹" },
    { "1011574", "三品破茧丹" },
    { "1011575", "二品破茧丹" },
    { "1011576", "一品破茧丹" },
    { "1011581", "六品结婴丹" },
    { "1011582", "五品结婴丹" },
    { "1011583", "四品结婴丹" },
    { "1011584", "三品结婴丹" },
    { "1011585", "二品结婴丹" },
    { "1011586", "一品结婴丹" },
    { "1011591", "六品化神丹" },
    { "1011592", "五品化神丹" },
    { "1011593", "四品化神丹" },
    { "1011594", "三品化神丹" },
    { "1011595", "二品化神丹" },
    { "1011596", "一品化神丹" },
    { "1011601", "六品悟道丹" },
    { "1011602", "五品悟道丹" },
    { "1011603", "四品悟道丹" },
    { "1011604", "三品悟道丹" },
    { "1011605", "二品悟道丹" },
    { "1011606", "一品悟道丹" },
    { "1011621", "六品羽化丹" },
    { "1011622", "五品羽化丹" },
    { "1011623", "四品羽化丹" },
    { "1011624", "三品羽化丹" },
    { "1011625", "二品羽化丹" },
    { "1011626", "一品羽化丹" },
    { "1011631", "六品登仙丹" },
    { "1011632", "五品登仙丹" },
    { "1011633", "四品登仙丹" },
    { "1011634", "三品登仙丹" },
    { "1011635", "二品登仙丹" },
    { "1011541", "六品三花丹" },
    { "1011542", "五品三花丹" },
    { "1011543", "四品三花丹" },
    { "1011544", "三品三花丹" },
    { "1011545", "二品三花丹" },
    { "1011546", "一品三花丹" },
    { "1011636", "一品登仙丹" },
    { "3011011", "石沉戒" },
    { "3011021", "坚岩戒" },
    { "3011031", "定岳戒" },
    { "3011041", "镇岳戒" },
    { "3011051", "灵鹊戒" },
    { "3011061", "魄温戒" },
    { "3011071", "焰凝戒" },
    { "3011081", "星阳戒" },
    { "3011091", "玉魄戒" },
    { "3011101", "尘星戒" },
    { "3011111", "上品石沉戒" },
    { "3011121", "上品坚岩戒" },
    { "3011131", "上品定岳戒" },
    { "3011141", "上品镇岳戒" },
    { "3011151", "上品灵鹊戒" },
    { "3011161", "上品魄温戒" },
    { "3011171", "上品焰凝戒" },
    { "3011181", "上品星阳戒" },
    { "3011191", "上品玉魄戒" },
    { "3011201", "上品尘星戒" },
    { "3011341", "炎瞳戒" },
    { "3011361", "闪虹戒" },
    { "3011381", "摘星戒" },
    { "3011401", "遮天戒" },
    { "3011441", "幽凝炎瞳戒" },
    { "3011461", "幽凝闪虹戒" },
    { "3011481", "幽凝摘星戒" },
    { "3011501", "幽凝遮天戒" },
    { "3021226", "当扈" },
    { "3021236", "獙獙" },
    { "3021011", "驺吾" },
    { "3021021", "乘黄" },
    { "3021031", "龙鱼" },
    { "3021041", "飞剑" },
    { "3021051", "飞剑" },
    { "3021061", "飞剑" },
    { "3021071", "飞剑" },
    { "3021081", "飞剑" },
    { "3021091", "飞剑" },
    { "3021101", "吉量" },
    { "3021111", "当康" },
    { "3021121", "矔疏" },
    { "3021131", "通碧葫芦" },
    { "3021141", "旋龟" },
    { "3021151", "祥云" },
    { "3021161", "飞舟" },
    { "3021176", "鲤龙" },
    { "3021186", "九霄灵云" },
    { "3021196", "绛晶异卵" },
    { "3021206", "碧檀玄舟" },
    { "3021216", "七彩祥云" },
    { "3021241", "北辰冰虹" },
    { "3021256", "玄沧星盘" },
    { "8103211", "古·驺吾" },
    { "8103221", "古·乘黄" },
    { "8103231", "古·龙鱼" },
    { "8103241", "古·飞剑" },
    { "8103251", "古·飞剑" },
    { "8103261", "古·飞剑" },
    { "8103271", "古·飞剑" },
    { "8103281", "古·飞剑" },
    { "8103291", "古·飞剑" },
    { "8103301", "古·吉量" },
    { "8103311", "古·当康" },
    { "8103321", "古·矔疏" },
    { "8103331", "古·通碧葫芦" },
    { "7000005", "幽魂驺吾" },
    { "7000006", "幽魂驺吾" },
    { "7000007", "幽魂驺吾" },
    { "7000008", "幽魂驺吾" },
    { "7000009", "幽魂驺吾" },
    { "7000010", "幽魂驺吾" },
    { "7000011", "幽魂驺吾" },
    { "7000012", "幽魂驺吾" },
    { "7000013", "幽魂驺吾" },
    { "7000014", "幽魂驺吾" },
    { "7000188", "饕餮犄角" },
    { "5301108", "流光玄金" },
    { "5301109", "赤血凝珠" },
    { "5082205", "太初仙璃" },
    { "5082215", "太素仙璃" },
    { "5082225", "太始仙璃" },
    { "5121182", "阴曲琴" },
    { "5342101", "赤玄金" },
    { "5350001", "冥种·晦" },
    { "5350002", "冥种·沌" },
    { "5350003", "冥种·煞" },
    { "5350004", "冥种·灼" },
    { "5350005", "冥种·幽" },
    { "5031724", "火灵气" },
    { "5031725", "火灵气" },
    { "5031726", "火灵气" },
    { "5031734", "水灵气" },
    { "5031735", "水灵气" },
    { "5031736", "水灵气" },
    { "5031744", "雷灵气" },
    { "5031745", "雷灵气" },
    { "5031746", "雷灵气" },
    { "5031754", "风灵气" },
    { "5031755", "风灵气" },
    { "5031756", "风灵气" },
    { "5031764", "土灵气" },
    { "5031765", "土灵气" },
    { "5031766", "土灵气" },
    { "5031774", "木灵气" },
    { "5031775", "木灵气" },
    { "5031776", "木灵气" },
    { "5031784", "火灵珠" },
    { "5031785", "火灵珠" },
    { "5031786", "火灵珠" },
    { "5031794", "水灵珠" },
    { "5031795", "水灵珠" },
    { "5031796", "水灵珠" },
    { "5031804", "雷灵珠" },
    { "5031805", "雷灵珠" },
    { "5031806", "雷灵珠" },
    { "5031814", "风灵珠" },
    { "5031815", "风灵珠" },
    { "5031816", "风灵珠" },
    { "5031824", "土灵珠" },
    { "5031825", "土灵珠" },
    { "5031826", "土灵珠" },
    { "5031834", "木灵珠" },
    { "5031835", "木灵珠" },
    { "5031836", "木灵珠" },
    { "5031844", "火灵斗气" },
    { "5031845", "火灵斗气" },
    { "5031846", "火灵斗气" },
    { "5031854", "水灵斗气" },
    { "5031855", "水灵斗气" },
    { "5031856", "水灵斗气" },
    { "5031864", "雷灵斗气" },
    { "5031865", "雷灵斗气" },
    { "5031866", "雷灵斗气" },
    { "5031874", "风灵斗气" },
    { "5031875", "风灵斗气" },
    { "5031876", "风灵斗气" },
    { "5031884", "土灵斗气" },
    { "5031885", "土灵斗气" },
    { "5031886", "土灵斗气" },
    { "5031894", "木灵斗气" },
    { "5031895", "木灵斗气" },
    { "5031896", "木灵斗气" },
    { "5031904", "火灵斗珠" },
    { "5031905", "火灵斗珠" },
    { "5031906", "火灵斗珠" },
    { "5031914", "水灵斗珠" },
    { "5031915", "水灵斗珠" },
    { "5031916", "水灵斗珠" },
    { "5031924", "雷灵斗珠" },
    { "5031925", "雷灵斗珠" },
    { "5031926", "雷灵斗珠" },
    { "5031934", "风灵斗珠" },
    { "5031935", "风灵斗珠" },
    { "5031936", "风灵斗珠" },
    { "5031944", "土灵斗珠" },
    { "5031945", "土灵斗珠" },
    { "5031946", "土灵斗珠" },
    { "5031954", "木灵斗珠" },
    { "5031955", "木灵斗珠" },
    { "5031956", "木灵斗珠" },
    { "5031964", "天道之气" },
    { "5031965", "天道之气" },
    { "5031966", "天道之气" },
    { "5031974", "地道之气" },
    { "5031975", "地道之气" },
    { "5031976", "地道之气" },
    { "5041015", "树妖魂珠" },
    { "5041025", "刑天魂珠" },
    { "5061016", "神石" },
    { "5061026", "玄玉" },
    { "5061036", "金沉木" },
    { "5061046", "蕴灵果" },
    { "5061056", "紫天晶" },
    { "5081015", "葬沙骨" },
    { "5081025", "朝夕露" },
    { "5081035", "千年钟乳" },
    { "5081045", "朱果" },
    { "5081055", "玉龙霜" },
    { "5081065", "暖玉" },
    { "5081075", "夕颜" },
    { "5081085", "绮罗幽香" },
    { "5081095", "鬼哭藤" },
    { "5081105", "北冥摄魂" },
    { "5081115", "星辰砂" },
    { "5081125", "天元茯苓" },
    { "5081135", "凤凰果" },
    { "5081145", "碧痕" },
    { "5081155", "九彩铃兰" },
    { "5081165", "冰葵" },
    { "5081175", "蚀心菇" },
    { "5081185", "荆棘血藤" },
    { "5081195", "东海明珠" },
    { "5081205", "玄黄母气" },
    { "5081215", "地心灵髓" },
    { "5081225", "魂婴果" },
    { "5081235", "天焱真火" },
    { "5081245", "地脉龙晶" },
    { "5081255", "龙骨青金" },
    { "5081265", "妖血石" },
    { "5081275", "地火石" },
    { "5081285", "悟心珠" },
    { "5081295", "混元石" },
    { "5081305", "羊脂昊玉" },
    { "5081315", "玄冥水" },
    { "5081325", "太阴真火" },
    { "5081335", "红玉珊瑚" },
    { "5081345", "弱水" },
    { "5081355", "阳炎精金" },
    { "5081365", "碧落黄泉" },
    { "5081375", "九幽冥泉水" },
    { "5081385", "九天断魂" },
    { "5081395", "大罗叶" },
    { "5081405", "鸩骨毒液" },
    { "5081415", "百蜕天蚕丝" },
    { "5081425", "六翅金蝉羽" },
    { "5081435", "镇魂之花" },
    { "5081445", "五彩神石" },
    { "5081455", "蕴仙芝" },
    { "5081465", "真武玄甲" },
    { "5081475", "日月宝葫" },
    { "5081485", "先天壬水" },
    { "5081495", "鸿运沙" },
    { "5081505", "造化青莲" },
    { "5081515", "碧桃" },
    { "5081525", "黄中李" },
    { "5081535", "天桂枝" },
    { "5081545", "鸡冠凤尾花" },
    { "5081555", "乌风草" },
    { "5081565", "天府玉莲" },
    { "5081575", "仙人厪" },
    { "5081585", "丹珠草" },
    { "5081595", "兜率仙芝" },
    { "5081605", "朱萍" },
    { "5081615", "灵苏" },
    { "5081625", "颜仙草" },
    { "5081635", "蜃气珠" },
    { "5081645", "日辉炎魄" },
    { "5081655", "绝地乌焱" },
    { "5081665", "玄冰碧火草" },
    { "5081675", "幽蓝灵光藻" },
    { "5081685", "五行仙轮" },
    { "5081695", "绿松竹叶" },
    { "5081705", "忘忧草" },
    { "5081715", "元极磁叶" },
    { "5081725", "太乙真金" },
    { "5081735", "天一真水" },
    { "5081745", "青冥矿" },
    { "5081755", "紫霄空心竹" },
    { "5081765", "凤羽" },
    { "5081775", "龙血灵草" },
    { "5081785", "满天星" },
    { "5081795", "星纹神木" },
    { "5081805", "离火砂" },
    { "5081815", "炫光晶" },
    { "5081825", "明光神叶" },
    { "5081835", "仙泪云母" },
    { "5081845", "凤啼血" },
    { "5081855", "冰心化灵" },
    { "5081865", "光阴流沙" },
    { "5081875", "星月流萤" },
    { "5081885", "银玉叶" },
    { "5081895", "天饮枝" },
    { "5081905", "帝落花" },
    { "5081915", "空冥火" },
    { "5081925", "天魂玉" },
    { "5081935", "土之本源" },
    { "5081945", "水之本源" },
    { "5081955", "木之本源" },
    { "5081965", "风之本源" },
    { "5081975", "火之本源" },
    { "5081985", "雷之本源" },
    { "5121111", "引群号" },
    { "5121121", "唤雷角" },
    { "5121131", "苍鸣磬" },
    { "5121141", "绝尘面" },
    { "5121151", "云焰尾" },
    { "5121161", "泪玉瞳" },
    { "5121171", "风匿袍" },
    { "5121181", "贪恶玺" },
    { "5121191", "星硫铁" },
    { "7011012", "天阴" },
    { "7011013", "双仪" },
    { "7011014", "天玑" },
    { "7011015", "祭祀卜辞" },
    { "7011025", "石鼓" },
    { "7021012", "幽泉" },
    { "7021013", "璃音" },
    { "7021014", "碧荧" },
    { "7021015", "赤灵" },
    { "7021016", "神秘玉人" },
    { "7021026", "云龙纹玉" },
    { "7021036", "玉龙玦" },
    { "7031012", "红鳐琴" },
    { "7031013", "翼望自悠" },
    { "7031014", "凌波瀚海" },
    { "7031015", "落雪芙蓉琴" },
    { "7031016", "九霄环佩" },
    { "7031026", "太古遗音" },
    { "7041012", "飞罗笛" },
    { "7041013", "玉衡笛" },
    { "7041014", "通幽笛" },
    { "7041015", "寒月冰魄" },
    { "7041016", "南荒笛" },
    { "7051012", "炽火" },
    { "7051013", "青耀" },
    { "7051014", "苍野" },
    { "7051015", "碧云" },
    { "7051016", "弄玉箫" },
    { "7061012", "镇魂" },
    { "7061013", "赤景钟" },
    { "7061014", "槐芫" },
    { "7061015", "天荒钟" },
    { "7071012", "龙首形铜饰" },
    { "7071022", "镇邪神鸟像" },
    { "7071023", "雍和腾蛇像" },
    { "7071033", "刑天像" },
    { "7071034", "沙漠之舟" },
    { "7071044", "青铜树" },
    { "7071045", "夔龙壶" },
    { "7071055", "错金银云纹犀尊" },
    { "7071056", "朱雀衔环杯" },
    { "7071066", "祥纹匕首" },
    { "7071076", "通灵卣" },
    { "7081012", "陶尊" },
    { "7081013", "灰狐陶" },
    { "7081014", "鱼纹瓶" },
    { "7081015", "祭祀瓷壶" },
    { "7081016", "人面鱼纹彩陶盆" },
    { "7081026", "陶鹰鼎" },
    { "7091012", "八卦图" },
    { "7091022", "舞干戚" },
    { "7091023", "巫祝" },
    { "7091033", "深目国" },
    { "7091034", "蚕神" },
    { "7091044", "饿鬼图" },
    { "7091045", "狩猎图" },
    { "7091055", "神农图" },
    { "7091065", "神凤升天图" },
    { "7091066", "山鬼图" },
    { "7091076", "灵龟授天书" },
    { "7091086", "呼风唤雨图" },
    { "7101012", "骨哨" },
    { "7101013", "那父角" },
    { "7101014", "灵龟卜甲" },
    { "7101015", "异兽牙链" },
    { "7101016", "夔骨槌" },
    { "6141012", "天阴" },
    { "6141013", "双仪" },
    { "6141014", "天玑" },
    { "6141015", "祭祀卜辞" },
    { "6141025", "石鼓" },
    { "6151012", "幽泉" },
    { "6151013", "璃音" },
    { "6151014", "碧荧" },
    { "6151015", "赤灵" },
    { "6151016", "神秘玉人" },
    { "6151026", "云龙纹玉" },
    { "6151036", "玉龙玦" },
    { "6161012", "红鳐琴" },
    { "6161013", "翼望自悠" },
    { "6161014", "凌波瀚海" },
    { "6161015", "落雪芙蓉琴" },
    { "6161025", "九霄环佩" },
    { "6161035", "太古遗音" },
    { "6171012", "飞罗笛" },
    { "6171013", "玉衡笛" },
    { "6171014", "通幽笛" },
    { "6171015", "寒月冰魄" },
    { "6171025", "南荒笛" },
    { "6181012", "炽火" },
    { "6181013", "青耀" },
    { "6181014", "苍野" },
    { "6181015", "碧云" },
    { "6181025", "弄玉箫" },
    { "6191012", "镇魂" },
    { "6191013", "赤景钟" },
    { "6191014", "槐芫" },
    { "6191024", "天荒钟" },
    { "6201012", "龙首形铜饰" },
    { "6201022", "镇邪神鸟像" },
    { "6201023", "雍和腾蛇像" },
    { "6201033", "刑天像" },
    { "6201034", "沙漠之舟" },
    { "6201044", "青铜树" },
    { "6201045", "夔龙壶" },
    { "6201055", "错金银云纹犀尊" },
    { "6201056", "朱雀衔环杯" },
    { "6201066", "祥纹匕首" },
    { "6201076", "通灵卣" },
    { "6211012", "陶尊" },
    { "6211013", "灰狐陶" },
    { "6211014", "鱼纹瓶" },
    { "6211015", "祭祀瓷壶" },
    { "6211025", "人面鱼纹彩陶盆" },
    { "6211035", "陶鹰鼎" },
    { "6221012", "八卦图" },
    { "6221022", "舞干戚" },
    { "6221023", "巫祝" },
    { "6221033", "深目国" },
    { "6221034", "蚕神" },
    { "6221044", "饿鬼图" },
    { "6221045", "狩猎图" },
    { "6221055", "神农图" },
    { "6221065", "神凤升天图" },
    { "6221066", "山鬼图" },
    { "6221076", "灵龟授天书" },
    { "6221086", "呼风唤雨图" },
    { "6231012", "骨哨" },
    { "6231013", "那父角" },
    { "6231014", "灵龟卜甲" },
    { "6231024", "异兽牙链" },
    { "6231034", "夔骨槌" },
    { "2022111", "界元石·炼气" },
    { "2022112", "界元石·冥屑" },
    { "2022113", "界元石·结晶" },
    { "2022114", "界元石·星砾" },
    { "2022115", "界元石·具灵" },
    { "2022116", "界元石·羽圭" },
    { "2022117", "界元石·化神" },
    { "2022118", "界元石·仙琼" },
    { "2022119", "界元石·羽化" },
    { "2022120", "界元石·仙琼" }
};

        // 字典2: 功法、书籍类物品，数量为2-10随机
        public static Dictionary<string, string> propDict2_10 = new Dictionary<string, string>()
{
    { "1051196", "炼丹通论（一）" },
    { "1051206", "炼丹通论（二）" },
    { "1051216", "炼丹通论（三）" },
    { "1051226", "炼丹通论（四）" },
    { "1051236", "炼丹通论（终）" },
    { "1051246", "风水通论" },
    { "1051256", "风水通论（一）" },
    { "1051266", "风水通论（二）" },
    { "1051276", "风水通论（三）" },
    { "1051286", "风水通论（终）" },
    { "1051296", "药材通论（一）" },
    { "1051306", "药材通论（二）" },
    { "1051316", "药材通论（三）" },
    { "1051326", "药材通论（四）" },
    { "1051336", "药材通论（终）" },
    { "1051346", "矿材通论（一）" },
    { "1051356", "矿材通论（二）" },
    { "1051366", "矿材通论（三）" },
    { "1051376", "矿材通论（四）" },
    { "1051386", "矿材通论（终）" },
    { "6161392", "炼器通论（一）" },
    { "6161393", "炼器通论（二）" },
    { "6161394", "炼器通论（三）" },
    { "6161395", "炼器通论（四）" },
    { "6161396", "炼器通论（终）" },
    { "1051396", "画符通论（一）" },
    { "1051406", "画符通论（二）" },
    { "1051416", "画符通论（三）" },
    { "1051426", "画符通论（四）" },
    { "1051436", "画符通论（终）" },
    { "6161397", "金丹论（一）" },
    { "6161398", "金丹论（二）" },
    { "6161399", "金丹论（三）" },
    { "6161400", "金丹论（四）" },
    { "6161401", "金丹论（终）" },
    { "6161402", "青囊集（一）" },
    { "6161403", "青囊集（二）" },
    { "6161404", "青囊集（三）" },
    { "6161405", "青囊集（四）" },
    { "6161406", "青囊集（终）" },
    { "6161407", "百草经（一）" },
    { "6161408", "百草经（二）" },
    { "6161409", "百草经（三）" },
    { "6161410", "百草经（四）" },
    { "6161411", "百草经（终）" },
    { "6161412", "玉璧书（一）" },
    { "6161413", "玉璧书（二）" },
    { "6161414", "玉璧书（三）" },
    { "6161415", "玉璧书（四）" },
    { "6161416", "玉璧书（终）" },
    { "6161417", "器形录（一）" },
    { "6161418", "器形录（二）" },
    { "6161419", "器形录（三）" },
    { "6161420", "器形录（四）" },
    { "6161421", "器形录（终" },
    { "1051072", "五品火灵果" },
    { "1051073", "四品火灵果" },
    { "1051074", "三品火灵果" },
    { "1051075", "二品火灵果" },
    { "1051076", "一品火灵果" },
    { "1051082", "五品水灵果" },
    { "1051083", "四品水灵果" },
    { "1051084", "三品水灵果" },
    { "1051085", "二品水灵果" },
    { "1051086", "一品水灵果" },
    { "1051092", "五品雷灵果" },
    { "1051093", "四品雷灵果" },
    { "1051094", "三品雷灵果" },
    { "1051095", "二品雷灵果" },
    { "1051096", "一品雷灵果" },
    { "1051102", "五品风灵果" },
    { "1051103", "四品风灵果" },
    { "1051104", "三品风灵果" },
    { "1051105", "二品风灵果" },
    { "1051106", "一品风灵果" },
    { "1051112", "五品土灵果" },
    { "1051113", "四品土灵果" },
    { "1051114", "三品土灵果" },
    { "1051115", "二品土灵果" },
    { "1051116", "一品土灵果" },
    { "1051122", "五品木灵果" },
    { "1051123", "四品木灵果" },
    { "1051124", "三品木灵果" },
    { "1051125", "二品木灵果" },
    { "1051126", "一品木灵果" },
    { "1051132", "五品刀灵果" },
    { "1051133", "四品刀灵果" },
    { "1051134", "三品刀灵果" },
    { "1051135", "二品刀灵果" },
    { "1051136", "一品刀灵果" },
    { "1051142", "五品枪灵果" },
    { "1051143", "四品枪灵果" },
    { "1051144", "三品枪灵果" },
    { "1051145", "二品枪灵果" },
    { "1051146", "一品枪灵果" },
    { "1051152", "五品剑灵果" },
    { "1051153", "四品剑灵果" },
    { "1051154", "三品剑灵果" },
    { "1051155", "二品剑灵果" },
    { "1051156", "一品剑灵果" },
    { "1051162", "五品拳灵果" },
    { "1051163", "四品拳灵果" },
    { "1051164", "三品拳灵果" },
    { "1051165", "二品拳灵果" },
    { "1051166", "一品拳灵果" },
    { "1051172", "五品掌灵果" },
    { "1051173", "四品掌灵果" },
    { "1051174", "三品掌灵果" },
    { "1051175", "二品掌灵果" },
    { "1051176", "一品掌灵果" },
    { "1051182", "五品指灵果" },
    { "1051183", "四品指灵果" },
    { "1051184", "三品指灵果" },
    { "1051185", "二品指灵果" },
    { "1051186", "一品指灵果" },
    { "1011641", "六品鸿蒙丹" },
    { "1011642", "五品鸿蒙丹" },
    { "1011643", "四品鸿蒙丹" },
    { "1011644", "三品鸿蒙丹" },
    { "1011645", "二品鸿蒙丹" },
    { "1011646", "一品鸿蒙丹" },
    { "1011651", "六品黄龙丹" },
    { "1011652", "五品黄龙丹" },
    { "1011653", "四品黄龙丹" },
    { "1011654", "三品黄龙丹" },
    { "1011655", "二品黄龙丹" },
    { "1011656", "一品黄龙丹" },
    { "1011661", "六品冰心丹" },
    { "1011662", "五品冰心丹" },
    { "1011663", "四品冰心丹" },
    { "1011664", "三品冰心丹" },
    { "1011665", "二品冰心丹" },
    { "1011666", "一品冰心丹" },
    { "1011671", "六品青龙丹" },
    { "1011672", "五品青龙丹" },
    { "1011673", "四品青龙丹" },
    { "1011674", "三品青龙丹" },
    { "1011675", "二品青龙丹" },
    { "1011676", "一品青龙丹" },
    { "1011681", "六品星罗丹" },
    { "1011682", "五品星罗丹" },
    { "1011683", "四品星罗丹" },
    { "1011684", "三品星罗丹" },
    { "1011685", "二品星罗丹" },
    { "1011686", "一品星罗丹" },
    { "1011691", "六品无相丹" },
    { "1011692", "五品无相丹" },
    { "1011693", "四品无相丹" },
    { "1011694", "三品无相丹" },
    { "1011695", "二品无相丹" },
    { "1011696", "一品无相丹" },
    { "1011701", "六品生骨丹" },
    { "1011702", "五品生骨丹" },
    { "1011703", "四品生骨丹" },
    { "1011704", "三品生骨丹" },
    { "1011705", "二品生骨丹" },
    { "1011706", "一品生骨丹" },
    { "1011711", "六品大还丹" },
    { "1011712", "五品大还丹" },
    { "1011713", "四品大还丹" },
    { "1021011", "六品毒雾丹" },
    { "1021012", "五品毒雾丹" },
    { "1021013", "四品毒雾丹" },
    { "1021014", "三品毒雾丹" },
    { "1021015", "二品毒雾丹" },
    { "1021016", "一品毒雾丹" },
    { "1031011", "六品飞云丹" },
    { "1031012", "五品飞云丹" },
    { "1031013", "四品飞云丹" },
    { "1031014", "三品飞云丹" },
    { "1031015", "二品飞云丹" },
    { "1031016", "一品飞云丹" },
    { "1031021", "六品移星丹" },
    { "1031022", "五品移星丹" },
    { "1031023", "四品移星丹" },
    { "1031024", "三品移星丹" },
    { "1031025", "二品移星丹" },
    { "1031026", "一品移星丹" },
    { "1031031", "六品神行丹" },
    { "1031032", "五品神行丹" },
    { "1031033", "四品神行丹" },
    { "1031034", "三品神行丹" },
    { "1031035", "二品神行丹" },
    { "1031036", "一品神行丹" },
    { "1011714", "三品大还丹" },
    { "1011715", "二品大还丹" },
    { "1011716", "一品大还丹" },
    { "1011721", "三阳生骨丹" },
    { "1011722", "五宝大还丹" },
    { "1011723", "七极固魂丹" },
    { "1011724", "九转还魂丹" },
    { "1011725", "二品固魂丹" },
    { "1011726", "一品固魂丹" },
    { "1011731", "六品清蕴丹" },
    { "1011732", "五品清蕴丹" },
    { "1011733", "四品清蕴丹" },
    { "1011734", "三品清蕴丹" },
    { "1011735", "二品清蕴丹" },
    { "1011736", "一品清蕴丹" },
    { "1011741", "六品三花护心丹" },
    { "1011742", "五品三花护心丹" },
    { "1011743", "四品三花护心丹" },
    { "1011744", "三品三花护心丹" },
    { "1011745", "二品三花护心丹" },
    { "1011746", "一品三花护心丹" },
    { "1011751", "六品太玄复明丹" },
    { "1011752", "五品太玄复明丹" },
    { "1011753", "四品太玄复明丹" },
    { "1011754", "三品太玄复明丹" },
    { "1011755", "二品太玄复明丹" },
    { "1011756", "一品太玄复明丹" },
    { "1011611", "六品天化丹" },
    { "1011612", "五品天化丹" },
    { "1011613", "四品天化丹" },
    { "1011614", "三品天化丹" },
    { "1011615", "二品天化丹" },
    { "1011616", "一品天化丹" },
    { "1011521", "六品玄微丹" },
    { "1011522", "五品玄微丹" },
    { "1011523", "四品玄微丹" },
    { "1011524", "三品玄微丹" },
    { "1011525", "二品玄微丹" },
    { "1011526", "一品玄微丹" },
    { "1011531", "六品云中丹" },
    { "1011532", "五品云中丹" },
    { "1011533", "四品云中丹" },
    { "1011534", "三品云中丹" },
    { "1011535", "二品云中丹" },
    { "1011536", "一品云中丹" },
    { "1011481", "六品天乾丹" },
    { "1011482", "五品天乾丹" },
    { "1011483", "四品天乾丹" },
    { "1011484", "三品天乾丹" },
    { "1011485", "二品天乾丹" },
    { "1011486", "一品天乾丹" },
    { "1011491", "六品地坤丹" },
    { "1011492", "五品地坤丹" },
    { "1011493", "四品地坤丹" },
    { "1011494", "三品地坤丹" },
    { "1011495", "二品地坤丹" },
    { "1011496", "一品地坤丹" },
    { "1011501", "六品万河丹" },
    { "1011502", "五品万河丹" },
    { "1011503", "四品万河丹" },
    { "1011504", "三品万河丹" },
    { "1011505", "二品万河丹" },
    { "1011506", "一品万河丹" },
    { "1011151", "六品幽冥饮魄丹" },
    { "1011152", "五品幽冥饮魄丹" },
    { "1011153", "四品幽冥饮魄丹" },
    { "1011154", "三品幽冥饮魄丹" },
    { "1011155", "二品幽冥饮魄丹" },
    { "1011156", "一品幽冥饮魄丹" },
    { "1011161", "六品蓄力丹" },
    { "1011162", "五品蓄力丹" },
    { "1011163", "四品蓄力丹" },
    { "1011164", "三品蓄力丹" },
    { "1011165", "二品蓄力丹" },
    { "1011166", "一品蓄力丹" },
    { "1011171", "六品赤阳丹" },
    { "1011172", "五品赤阳丹" },
    { "1011173", "四品赤阳丹" },
    { "1011174", "三品赤阳丹" },
    { "1011175", "二品赤阳丹" },
    { "1011176", "一品赤阳丹" },
    { "1011181", "六品嗜血丹" },
    { "1011182", "五品嗜血丹" },
    { "1011183", "四品嗜血丹" },
    { "1011184", "三品嗜血丹" },
    { "1011185", "二品嗜血丹" },
    { "1011186", "一品嗜血丹" },
    { "1011191", "六品龙力丹" },
    { "1011192", "五品龙力丹" },
    { "1011193", "四品龙力丹" },
    { "1011194", "三品龙力丹" },
    { "1011195", "二品龙力丹" },
    { "1011196", "一品龙力丹" },
    { "1011201", "六品血煞破阳丹" },
    { "1011202", "五品血煞破阳丹" },
    { "1011203", "四品血煞破阳丹" },
    { "1011204", "三品血煞破阳丹" },
    { "1011205", "二品血煞破阳丹" },
    { "1011206", "一品血煞破阳丹" },
    { "1011211", "六品塑骨丹" },
    { "1011212", "五品塑骨丹" },
    { "1011213", "四品塑骨丹" },
    { "1011214", "三品塑骨丹" },
    { "1011215", "二品塑骨丹" },
    { "1011216", "一品塑骨丹" },
    { "1011221", "六品玉琼丹" },
    { "1011222", "五品玉琼丹" },
    { "1011223", "四品玉琼丹" },
    { "1011224", "三品玉琼丹" },
    { "1011225", "二品玉琼丹" },
    { "1011226", "一品玉琼丹" },
    { "1011231", "六品子午丹" },
    { "1011232", "五品子午丹" },
    { "1011233", "四品子午丹" },
    { "1011234", "三品子午丹" },
    { "1011235", "二品子午丹" },
    { "1011236", "一品子午丹" },
    { "1011241", "六品蜕骨丹" },
    { "1011242", "五品蜕骨丹" },
    { "1011243", "四品蜕骨丹" },
    { "1011244", "三品蜕骨丹" },
    { "1011245", "二品蜕骨丹" },
    { "1011246", "一品蜕骨丹" },
    { "1011251", "六品浑天丹" },
    { "1011252", "五品浑天丹" },
    { "1011253", "四品浑天丹" },
    { "1011254", "三品浑天丹" },
    { "1011255", "二品浑天丹" },
    { "1011256", "一品浑天丹" },
    { "1011261", "六品真武塑体丹" },
    { "1011262", "五品真武塑体丹" },
    { "1011263", "四品真武塑体丹" },
    { "1011264", "三品真武塑体丹" },
    { "1011265", "二品真武塑体丹" },
    { "1011266", "一品真武塑体丹" },
    { "1011271", "六品延寿丹" },
    { "1011272", "五品延寿丹" },
    { "1011273", "四品延寿丹" },
    { "1011274", "三品延寿丹" },
    { "1011275", "二品延寿丹" },
    { "1011276", "一品延寿丹" },
    { "1011281", "六品壮元丹" },
    { "1011282", "五品壮元丹" },
    { "1011283", "四品壮元丹" },
    { "1011284", "三品壮元丹" },
    { "1011285", "二品壮元丹" },
    { "1011286", "一品壮元丹" },
    { "1011291", "六品补天丹" },
    { "1011292", "五品补天丹" },
    { "1011293", "四品补天丹" },
    { "1011294", "三品补天丹" },
    { "1011295", "二品补天丹" },
    { "1011296", "一品补天丹" },
    { "1011301", "六品茯苓丹" },
    { "1011302", "五品茯苓丹" },
    { "1011303", "四品茯苓丹" },
    { "1011304", "三品茯苓丹" },
    { "1011305", "二品茯苓丹" },
    { "1011306", "一品茯苓丹" },
    { "1011311", "六品地仙丹" },
    { "1011312", "五品地仙丹" },
    { "1011313", "四品地仙丹" },
    { "1011314", "三品地仙丹" },
    { "1011315", "二品地仙丹" },
    { "1011316", "一品地仙丹" },
    { "1011321", "六品九天禳寿丹" },
    { "1011322", "五品九天禳寿丹" },
    { "1011323", "四品九天禳寿丹" },
    { "1011324", "三品九天禳寿丹" },
    { "1011325", "二品九天禳寿丹" },
    { "1011326", "一品九天禳寿丹" },
    { "1011331", "六品黄精丸" },
    { "1011332", "五品黄精丸" },
    { "1011333", "四品黄精丸" },
    { "1011334", "三品黄精丸" },
    { "1011335", "二品黄精丸" },
    { "1011336", "一品黄精丸" },
    { "1011341", "六品十全大补丸" },
    { "1011342", "五品十全大补丸" },
    { "1011343", "四品十全大补丸" },
    { "1011344", "三品十全大补丸" },
    { "1011345", "二品十全大补丸" },
    { "1011346", "一品十全大补丸" },
    { "1011351", "六品十精丸" },
    { "1011352", "五品十精丸" },
    { "1011353", "四品十精丸" },
    { "1011354", "三品十精丸" },
    { "1011355", "二品十精丸" },
    { "1011356", "一品十精丸" },
    { "1011361", "六品人参养荣丸" },
    { "1011362", "五品人参养荣丸" },
    { "1011363", "四品人参养荣丸" },
    { "1011364", "三品人参养荣丸" },
    { "1011365", "二品人参养荣丸" },
    { "1011366", "一品人参养荣丸" },
    { "1011371", "六品养颜丹" },
    { "1011372", "五品养颜丹" },
    { "1011373", "四品养颜丹" },
    { "1011374", "三品养颜丹" },
    { "1011375", "二品养颜丹" },
    { "1011376", "一品养颜丹" },
    { "1011381", "六品复容丹" },
    { "1011382", "五品复容丹" },
    { "1011383", "四品复容丹" },
    { "1011384", "三品复容丹" },
    { "1011385", "二品复容丹" },
    { "1011386", "一品复容丹" },
    { "1011391", "六品琉璃驻颜丹" },
    { "1011392", "五品琉璃驻颜丹" },
    { "1011393", "四品琉璃驻颜丹" },
    { "1011394", "三品琉璃驻颜丹" },
    { "1011395", "二品琉璃驻颜丹" },
    { "1011396", "一品琉璃驻颜丹" },
    { "1011401", "六品开阳丹" },
    { "1011402", "五品开阳丹" },
    { "1011403", "四品开阳丹" },
    { "1011404", "三品开阳丹" },
    { "1011405", "二品开阳丹" },
    { "1011406", "一品开阳丹" },
    { "1011411", "六品炼体丹" },
    { "1011412", "五品炼体丹" },
    { "1011413", "四品炼体丹" },
    { "1011414", "三品炼体丹" },
    { "1011415", "二品炼体丹" },
    { "1011416", "一品炼体丹" },
    { "1011421", "六品融灵丹" },
    { "1011422", "五品融灵丹" },
    { "1011423", "四品融灵丹" },
    { "1011424", "三品融灵丹" },
    { "1011425", "二品融灵丹" },
    { "1011426", "一品融灵丹" },
    { "1011431", "六品炼神丹" },
    { "1011432", "五品炼神丹" },
    { "1011433", "四品炼神丹" },
    { "1011434", "三品炼神丹" },
    { "1011435", "二品炼神丹" },
    { "1011436", "一品炼神丹" },
    { "1011441", "六品蕴魂丹" },
    { "1011442", "五品蕴魂丹" },
    { "1011443", "四品蕴魂丹" },
    { "1011444", "三品蕴魂丹" },
    { "1011445", "二品蕴魂丹" },
    { "1011446", "一品蕴魂丹" },
    { "1011451", "六品炼魂丹" },
    { "1011452", "五品炼魂丹" },
    { "1011453", "四品炼魂丹" },
    { "1011454", "三品炼魂丹" },
    { "1011455", "二品炼魂丹" },
    { "1011456", "一品炼魂丹" },
    { "1011091", "六品九转圣阳丹" },
    { "1011092", "五品九转圣阳丹" },
    { "1011093", "四品九转圣阳丹" },
    { "1011094", "三品九转圣阳丹" },
    { "1011095", "二品九转圣阳丹" },
    { "1011096", "一品九转圣阳丹" },
    { "1011111", "六品培元丹" },
    { "1011112", "五品培元丹" },
    { "1011113", "四品培元丹" },
    { "1011114", "三品培元丹" },
    { "1011115", "二品培元丹" },
    { "1011116", "一品培元丹" },
    { "1011121", "六品玄元丹" },
    { "1011122", "五品玄元丹" },
    { "1011123", "四品玄元丹" },
    { "1011124", "三品玄元丹" },
    { "1011125", "二品玄元丹" },
    { "1011126", "一品玄元丹" },
    { "1011131", "六品复灵丹" },
    { "1011132", "五品复灵丹" },
    { "1011133", "四品复灵丹" },
    { "1011134", "三品复灵丹" },
    { "1011135", "二品复灵丹" },
    { "1011136", "一品复灵丹" },
    { "1011141", "六品广陵丹" },
    { "1011142", "五品广陵丹" },
    { "1011143", "四品广陵丹" },
    { "1011144", "三品广陵丹" },
    { "1011145", "二品广陵丹" },
    { "1011146", "一品广陵丹" },
    { "6291011", "六品道心果" },
    { "6291012", "五品道心果" },
    { "6291013", "四品道心果" },
    { "6291014", "三品道心果" },
    { "6291015", "二品道心果" },
    { "6291016", "一品道心果" },
    { "1011011", "六品补元丹" },
    { "1011012", "五品补元丹" },
    { "1011013", "四品补元丹" },
    { "1011014", "三品补元丹" },
    { "1011015", "二品补元丹" },
    { "1011016", "一品补元丹" },
    { "1011041", "六品补气丹" },
    { "1011042", "五品补气丹" },
    { "1011043", "四品补气丹" },
    { "1011044", "三品补气丹" },
    { "1011045", "二品补气丹" },
    { "1011046", "一品补气丹" },
    { "1011051", "六品化瘀丹" },
    { "1011052", "五品化瘀丹" },
    { "1011053", "四品化瘀丹" },
    { "1011054", "三品化瘀丹" },
    { "1011055", "二品化瘀丹" },
    { "1011056", "一品化瘀丹" },
    { "1011061", "六品活血丹" },
    { "1011062", "五品活血丹" },
    { "1011063", "四品活血丹" },
    { "1011064", "三品活血丹" },
    { "1011065", "二品活血丹" },
    { "1011066", "一品活血丹" },
    { "1011071", "六品复生丹" },
    { "1011072", "五品复生丹" },
    { "1011073", "四品复生丹" },
    { "1011074", "三品复生丹" },
    { "1011075", "二品复生丹" },
    { "1011076", "一品复生丹" },
    { "1011081", "六品融血丹" },
    { "1011082", "五品融血丹" },
    { "1011083", "四品融血丹" },
    { "1011084", "三品融血丹" },
    { "1011085", "二品融血丹" },
    { "1011086", "一品融血丹" }
};
        public static class MartialUtil
        {
            /// <summary>
            /// 获取角色的境界名称
            /// </summary>
            /// <param name="unit">角色单位</param>
            /// <returns>境界名称</returns>
            public static string getGradeName(WorldUnitBase unit)
            {
                if (unit == null) return "";

                int grade = unit.data.dynUnitData.GetGrade();
                int phase = 1;

                // 检查境界阶段
                if (UnitConditionTool.Condition("gradePhase_0_2_2", new UnitConditionData(unit, null)))
                {
                    phase = 2;
                }
                else if (UnitConditionTool.Condition("gradePhase_0_3_3", new UnitConditionData(unit, null)))
                {
                    phase = 3;
                }

                // 使用游戏配置获取境界名称
                return g.conf.roleGrade.GetGradeName(grade, phase);
            }

            /// <summary>
            /// 根据境界等级获取境界名称（备用方法）
            /// </summary>
            /// <param name="grade">境界等级</param>
            /// <returns>境界名称</returns>
            public static string getGradeName(int grade)
            {
                if (grade == 1) return "练气境";
                if (grade == 2) return "筑基境";
                if (grade == 3) return "结晶境";
                if (grade == 4) return "金丹境";
                if (grade == 5) return "具灵境";
                if (grade == 6) return "元婴境";
                if (grade == 7) return "化神境";
                if (grade == 8) return "悟道境";
                if (grade == 9) return "羽化境";
                if (grade >= 10) return "登仙境";
                return "";
            }

            /// <summary>
            /// 获取地区名称
            /// </summary>
            /// <param name="areaId">地区ID</param>
            /// <returns>地区名称</returns>
            public static string getAreaName(int areaId)
            {
                switch (areaId)
                {
                    case 1: return "白源区";
                    case 2: return "永宁州";
                    case 3: return "雷泽";
                    case 4: return "华封州";
                    case 5: return "十万大山";
                    case 6: return "云陌州";
                    case 7: return "永恒冰原";
                    case 8: return "暮仙州";
                    case 9: return "迷途荒漠";
                    case 10: return "赤幽州";
                    case 11: return "天元";
                    case 12: return "冥山";
                    case 13: return "天元山";
                    default: return "";
                }
            }

            /// <summary>
            /// 获取角色所在位置的完整名称
            /// </summary>
            /// <param name="unit">角色单位</param>
            /// <returns>位置完整名称</returns>
            public static string getAreaName(WorldUnitBase unit)
            {
                if (unit == null) return "";

                string locationName = "";

                // 检查是否在建筑中
                MapBuildBase build = g.world.build.GetBuild(unit.data.unitData.GetPoint());
                if (build != null)
                {
                    locationName = build.name;
                }
                else
                {
                    // 如果不在建筑中，显示坐标
                    locationName = string.Format("野外({0},{1})", unit.data.unitData.pointX, unit.data.unitData.pointY);
                }

                // 组合地区和具体位置
                return getAreaName(unit.data.unitData.pointGridData.areaBaseID) + locationName;
            }

            /// <summary>
            /// 获取性格特质名称
            /// </summary>
            /// <param name="id">性格特质ID</param>
            /// <returns>性格特质名称</returns>
            public static string GetCharacterName(int id)
            {
                ConfRoleCreateCharacterItem item = g.conf.roleCreateCharacter.GetItem(id);
                if (item != null)
                {
                    return GameTool.LS(item.sc5asd_sd34) + ":" + GameTool.LS(item.xdash_54sd);
                }
                return "";
            }

            /// <summary>
            /// 获取角色最强的武器系类型
            /// </summary>
            /// <param name="unit">角色单位</param>
            /// <returns>武器系类型ID</returns>
            public static int GetMaxWpType(WorldUnitBase unit)
            {
                if (unit == null) return 0;

                int maxType = 0;
                int maxValue = 0;

                for (int i = 1; i < 7; i++)
                {
                    int value = unit.data.dynUnitData.GetBasWpOrMg(i).value;
                    if (value > maxValue)
                    {
                        maxValue = value;
                        maxType = i;
                    }
                }

                return maxType;
            }

            /// <summary>
            /// 获取角色最强的法术系类型
            /// </summary>
            /// <param name="unit">角色单位</param>
            /// <returns>法术系类型ID</returns>
            public static int GetMaxMgType(WorldUnitBase unit)
            {
                if (unit == null) return 0;

                int maxType = 0;
                int maxValue = 0;

                for (int i = 10; i < 17; i++)
                {
                    int value = unit.data.dynUnitData.GetBasWpOrMg(i).value;
                    if (value > maxValue)
                    {
                        maxValue = value;
                        maxType = i;
                    }
                }

                return maxType;
            }

            /// <summary>
            /// 获取角色最强的战斗系类型(武器或法术)
            /// </summary>
            /// <param name="unit">角色单位</param>
            /// <param name="type">类型过滤(0:全部,1:只武器,2:只法术)</param>
            /// <returns>战斗类型ID</returns>
            public static int GetMaxBattleType(WorldUnitBase unit, int type = 1)
            {
                if (unit == null) return 1;

                int maxWpType = 1;
                int maxWpValue = 1;
                int maxMgType = 1;
                int maxMgValue = 1;

                // 检查武器系
                if (type == 0 || type == 1)
                {
                    for (int i = 1; i < 7; i++)
                    {
                        int value = unit.data.dynUnitData.GetBasWpOrMg(i).value;
                        if (value > maxWpValue)
                        {
                            maxWpValue = value;
                            maxWpType = i;
                        }
                    }
                }

                // 检查法术系
                if (type == 0 || type == 2)
                {
                    for (int j = 10; j < 17; j++)
                    {
                        int value = unit.data.dynUnitData.GetBasWpOrMg(j).value;
                        if (value > maxMgValue)
                        {
                            maxMgValue = value;
                            maxMgType = j;
                        }
                    }
                }

                // 返回最强的类型
                return maxWpValue > maxMgValue ? maxWpType : maxMgType;
            }
        }
        /// <summary>
        /// 随机选取物品并创建物品奖励列表
        /// </summary>
        /// <returns>包含随机选择物品的列表</returns>
        public static Il2CppSystem.Collections.Generic.List<DataProps.PropsData> GetRandomRewards(out Dictionary<string, int> rewardInfo)
        {
            // 创建奖励物品列表
            Il2CppSystem.Collections.Generic.List<DataProps.PropsData> rewardItems = new Il2CppSystem.Collections.Generic.List<DataProps.PropsData>();

            // 创建物品名称和数量的字典
            rewardInfo = new Dictionary<string, int>();

            // 创建随机数生成器
            System.Random random = new System.Random();
            try
            {
                double randomValue = random.NextDouble();
                Debug.Log($"随机值: {randomValue}, 判断条件: {randomValue < 0}");

                if (randomValue < 0.25)
                {
                    Debug.Log("进入功法奖励分支");

                    // 使用游戏的奖励系统创建功法
                    // 参数：功法类型, 基础ID, 品级, 等级
                    System.Random randomType = new System.Random();
                    MartialType martialType = (MartialType)randomType.Next(1, 6);

                    int baseID = 0; // 功法基础ID
                    int grade = g.world.playerUnit.data.dynUnitData.GetGrade();  // 等级
                    int level = 6;  // 品级

                    Debug.Log($"创建功法参数 - 类型:{martialType}, 基础ID:{baseID}, 等级:{grade}, 品级:{level}");

                    // 使用 RandomGetRewardData 和 RewardTool 创建功法
                    RandomGetRewardData randomGetRewardData = new RandomGetRewardData(martialType, level, grade)
                    {
                        baseID = baseID
                        
                    };
                    Debug.Log($"创建RandomGetRewardData成功: {randomGetRewardData != null}");


                    GameItemRewardData reward = RewardTool.GetReward(randomGetRewardData, null);
                    Debug.Log($"获取奖励数据成功: {reward != null}");

                    if (reward != null)
                    {
                        DataProps.PropsData martialProps = RewardTool.GetRewardPropsData(reward);
                        Debug.Log($"创建功法道具成功: {martialProps != null}");

                        if (martialProps != null)
                        {
                            rewardItems.Add(martialProps);
                            rewardInfo.Add($"{martialProps.propsInfoBase.name}", 1);
                            Debug.Log($"添加功法到奖励列表成功");
                            Debug.Log($"{martialProps.propsInfoBase}");

                            return rewardItems;
                        }
                    }

                    Debug.Log("功法创建失败，继续常规奖励生成");
                }
                else if (randomValue < 0.5)
                {
                    Debug.Log("进入气运奖励分支");

                    List<int> playerLuckIds = new List<int>();
                    foreach (WorldUnitLuckBase luck in g.world.playerUnit.allLuck)
                    {
                        playerLuckIds.Add(luck.luckConf.id);
                    }
                    Debug.Log($"玩家已拥有气运数量: {playerLuckIds.Count}");

                    // 从气运字典中过滤掉玩家已拥有的气运
                    List<string> availableLuckKeys = new List<string>();
                    foreach (var pair in luckDict)
                    {
                        int luckIds = int.Parse(pair.Key);
                        if (!playerLuckIds.Contains(luckIds))
                        {
                            availableLuckKeys.Add(pair.Key);
                        }
                    }

                    Debug.Log($"可用气运数量: {availableLuckKeys.Count}");

                    List<string> luckKeys = luckDict.Keys.ToList();
                    string selectedLuckKey = availableLuckKeys[random.Next(availableLuckKeys.Count)];
                    int luckId = int.Parse(selectedLuckKey);

                    Debug.Log($"选择气运ID: {luckId}");
                    string luckFullName = luckDict[selectedLuckKey];
                    rewardInfo.Add($"玩家在奇遇中获得的效果：{luckFullName}", 1);

                    //防止无奖励
                    int totalItemCount2 = random.Next(1, 4); // 3到10之间的随机数

                    // 从两个字典中获取所有可能的key
                    List<string> keys12 = propDict1.Keys.ToList();
                    List<string> keys22 = propDict2_10.Keys.ToList();

                    // 随机打乱两个列表顺序，方便随机选择
                    Shuffle(keys12, random);
                    Shuffle(keys22, random);

                    // 计算从每个字典中选择的物品数量
                    // 确保至少从每个字典中选择一个物品，其余随机分配
                    int dict1Count2 = random.Next(1, Math.Min(keys12.Count, totalItemCount2));
                    int dict2Count2 = Math.Min(totalItemCount2 - dict1Count2, keys22.Count);

                    // 从字典1中选择物品并添加到奖励列表中
                    for (int i = 0; i < dict1Count2; i++)
                    {
                        if (i < keys12.Count) // 确保不超过字典1的大小
                        {
                            int propId = int.Parse(keys12[i]);
                            int amount1 = 1; // propDict1中的物品数量固定为1

                            DataProps.PropsData propsData = DataProps.PropsData.NewProps(propId, amount1);
                            rewardItems.Add(propsData);
                        }
                    }

                    // 从字典2中选择物品并添加到奖励列表中
                    for (int i = 0; i < dict2Count2; i++)
                    {
                        if (i < keys22.Count) // 确保不超过字典2的大小
                        {
                            int propId = int.Parse(keys22[i]);
                            int amount1 = random.Next(2, 11); // propDict2_10中的物品数量为2-10随机

                            DataProps.PropsData propsData = DataProps.PropsData.NewProps(propId, amount1);
                            rewardItems.Add(propsData);
                        }
                    }

                    // 获取玩家境界
                    int playerGrade2 = g.world.playerUnit.data.unitData.propertyData.gradeID;

                    // 计算灵石数量: 玩家境界 * 1000，再随机-50%到+50%
                    int baseAmount2 = playerGrade2 * 1000;
                    int variation2 = (int)(baseAmount2 * (random.NextDouble() - 0.5)); // -50%到+50%的随机变化
                    int amount2 = baseAmount2 + variation2;

                    // 确保灵石数量至少为10
                    amount2 = Math.Max(10, amount2);

                    // 添加灵石(ID 10001)
                    DataProps.PropsData spiritualStone2 = DataProps.PropsData.NewProps(10001, amount2);
                    rewardItems.Add(spiritualStone2);

                    return rewardItems;

                }
                Debug.Log("跳过功法奖励，继续常规奖励生成");
            }
            catch (Exception ex)
            {
                Debug.Log($"功法奖励生成失败 - 错误信息: {ex.Message}");
                Debug.Log("继续执行常规奖励生成流程");
            }
            // 确定要选择的物品总数 (3-10个)
            int totalItemCount = random.Next(1, 4); // 3到10之间的随机数

            // 从两个字典中获取所有可能的key
            List<string> keys1 = propDict1.Keys.ToList();
            List<string> keys2 = propDict2_10.Keys.ToList();

            // 随机打乱两个列表顺序，方便随机选择
            Shuffle(keys1, random);
            Shuffle(keys2, random);

            // 计算从每个字典中选择的物品数量
            // 确保至少从每个字典中选择一个物品，其余随机分配
            int dict1Count = random.Next(1, Math.Min(keys1.Count, totalItemCount));
            int dict2Count = Math.Min(totalItemCount - dict1Count, keys2.Count);

            // 从字典1中选择物品并添加到奖励列表中
            for (int i = 0; i < dict1Count; i++)
            {
                if (i < keys1.Count) // 确保不超过字典1的大小
                {
                    int propId = int.Parse(keys1[i]);
                    int amount1 = 1; // propDict1中的物品数量固定为1

                    DataProps.PropsData propsData = DataProps.PropsData.NewProps(propId, amount1);
                    rewardItems.Add(propsData);

                    // 添加到名称和数量字典
                    rewardInfo.Add(propDict1[keys1[i]], amount1);
                }
            }

            // 从字典2中选择物品并添加到奖励列表中
            for (int i = 0; i < dict2Count; i++)
            {
                if (i < keys2.Count) // 确保不超过字典2的大小
                {
                    int propId = int.Parse(keys2[i]);
                    int amount1 = random.Next(2, 11); // propDict2_10中的物品数量为2-10随机

                    DataProps.PropsData propsData = DataProps.PropsData.NewProps(propId, amount1);
                    rewardItems.Add(propsData);

                    // 添加到名称和数量字典
                    rewardInfo.Add(propDict2_10[keys2[i]], amount1);
                }
            }

            // 获取玩家境界
            int playerGrade = g.world.playerUnit.data.unitData.propertyData.gradeID;

            // 计算灵石数量: 玩家境界 * 1000，再随机-50%到+50%
            int baseAmount = playerGrade * 1000;
            int variation = (int)(baseAmount * (random.NextDouble() - 0.5)); // -50%到+50%的随机变化
            int amount = baseAmount + variation;

            // 确保灵石数量至少为10
            amount = Math.Max(10, amount);

            // 添加灵石(ID 10001)
            DataProps.PropsData spiritualStone = DataProps.PropsData.NewProps(10001, amount);
            rewardItems.Add(spiritualStone);

            // 添加灵石到名称和数量字典
            rewardInfo.Add("灵石", amount);

            return rewardItems;
        }

        /// <summary>
        /// 随机打乱列表顺序
        /// </summary>
        /// <typeparam name="T">列表元素类型</typeparam>
        /// <param name="list">要打乱的列表</param>
        /// <param name="random">随机数生成器</param>
        private static void Shuffle<T>(List<T> list, System.Random random)
        {
            int n = list.Count;
            while (n > 1)
            {
                n--;
                int k = random.Next(n + 1);
                T value = list[k];
                list[k] = list[n];
                list[n] = value;
            }
        }

        /// <summary>
        /// 提取NPC的详细信息，生成格式化字符串
        /// </summary>
        /// <param name="unit">要提取信息的NPC单位对象</param>
        /// <param name="toUnit">参照单位，通常为玩家角色</param>
        /// <returns>格式化的NPC信息字符串</returns>
        public static string GetNPCInfoString(WorldUnitBase unit, WorldUnitBase toUnit = null)
        {
            if (unit == null)
            {
                return "错误：无效的NPC单位";
            }

            if (toUnit == null)
            {
                toUnit = g.world.playerUnit; // 默认参照单位为玩家
            }

            try
            {
                StringBuilder info = new StringBuilder();

                // 1. 基本身份信息
                string name = unit.data.unitData.propertyData.GetName();
                string gender = ((int)unit.data.unitData.propertyData.sex == 1) ? "男" : "女";
                string realm = MartialUtil.getGradeName(unit);
                int age = unit.data.unitData.propertyData.age / 12; // 游戏中年龄以月为单位

                // 种族信息
                string race = "人族";
                int raceId;
                if (unit.data.unitData.objData.ContainsKey("roleRace"))
                {
                    raceId = unit.data.unitData.objData.GetInt("roleRace");
                }
                else
                {
                    raceId = unit.data.dynUnitData.race.baseValue;
                }
                ConfRoleRaceItem raceItem = g.conf.roleRace.GetItem(raceId);
                if (raceItem != null)
                {
                    race = GameTool.LS(raceItem.race);
                }

                // 特殊身份
                string identity = "普通";
                if (UnitConditionTool.Condition("superHero_0_1", new UnitConditionData(unit, null)))
                {
                    identity = "天骄";
                }

                // 2. 社会关系信息
                // 宗门与职位
                string sect = (unit.data.school == null) ? "散修" : unit.data.school.name;
                if (unit.data.school != null && unit.data.school.schoolData != null)
                {
                    string position = unit.data.school.schoolData.GetPostTypeName(unit.data.unitData.unitID);
                    if (!string.IsNullOrEmpty(position))
                    {
                        sect += position;
                    }
                }

                // 当前位置
                string location = MartialUtil.getAreaName(unit);

                // 与参照角色的关系
                string relationship = StringExtensions.IsEmpty(g.conf.npcPartFitting.GetPartName(unit, toUnit))
                    ? "道友" : g.conf.npcPartFitting.GetPartName(unit, toUnit);

                // 与参照角色的亲密度
                int intimacy = unit.data.unitData.relationData.GetIntim(toUnit);

                // 婚姻状况
                string marriageStatus = string.IsNullOrEmpty(unit.data.unitData.relationData.married)
                    ? "未婚"
                    : ("已婚\t" + unit.data.unitData.relationData.lover.Count.ToString() + "个道侣");

                // 3. 性格和爱好
                // 性格特质
                List<string> characterTraits = new List<string>();
                foreach (int id in unit.data.GetCharacter())
                {
                    characterTraits.Add(MartialUtil.GetCharacterName(id));
                }
                string characterStr = string.Join(" ", characterTraits);
                if (StringExtensions.IsEmpty(characterStr))
                {
                    characterStr = "无";
                }

                // 爱好
                List<string> hobbies = new List<string>();
                foreach (ConfRoleCreateHobbyItem item in unit.data.GetHobbyItems())
                {
                    hobbies.Add(GameTool.LS(item.name));
                }
                string hobbyStr = string.Join(" ", hobbies);
                if (StringExtensions.IsEmpty(hobbyStr))
                {
                    hobbyStr = "无";
                }

                // 4. 状态与能力信息
                // 近期烦恼
                List<string> troubles = new List<string>();
                foreach (UnitTroubleBase trouble in unit.allTroubles)
                {
                    troubles.Add(GameTool.LS(trouble.GetDesc()));
                }
                string troubleStr = string.Join(" ", troubles);
                if (StringExtensions.IsEmpty(troubleStr))
                {
                    troubleStr = "无";
                }

                // 能力值
                int beauty = unit.data.unitData.propertyData.beauty;
                int power = FormulaTool.UnitPower.TotalPower(unit.data);
                int mood = unit.data.unitData.propertyData.mood;
                int energy = unit.data.unitData.propertyData.energy;
                int reputation = unit.data.unitData.propertyData.reputation;

                // 5. 详细关系网络
                List<string> relationships = new List<string>();

                // 添加道侣信息
                relationships.Add("道侣:");
                foreach (string id in unit.data.unitData.relationData.lover)
                {
                    WorldUnitBase relatedUnit = g.world.unit.GetUnit(id, true);
                    if (relatedUnit != null)
                    {
                        relationships[0] += relatedUnit.data.unitData.propertyData.GetName() + " ";
                    }
                }
                if (relationships[0].Length < 4)
                {
                    relationships[0] = "道侣：无";
                }

                // 配偶
                relationships.Add("配偶:");
                if (!string.IsNullOrEmpty(unit.data.unitData.relationData.married))
                {
                    WorldUnitBase spouseUnit = g.world.unit.GetUnit(unit.data.unitData.relationData.married, true);
                    if (spouseUnit != null)
                    {
                        relationships[1] += spouseUnit.data.unitData.propertyData.GetName();
                    }
                }
                if (relationships[1].Length < 4)
                {
                    relationships[1] = "配偶：无";
                }

                // 父母
                relationships.Add("父母:");
                foreach (string id in unit.data.unitData.relationData.parent)
                {
                    WorldUnitBase parentUnit = g.world.unit.GetUnit(id, true);
                    if (parentUnit != null)
                    {
                        relationships[2] += parentUnit.data.unitData.propertyData.GetName() + " ";
                    }
                }
                if (relationships[2].Length < 4)
                {
                    relationships[2] = "父母：无";
                }

                // 孩子
                relationships.Add("孩子:");
                foreach (string id in unit.data.unitData.relationData.children)
                {
                    WorldUnitBase childUnit = g.world.unit.GetUnit(id, true);
                    if (childUnit != null)
                    {
                        relationships[3] += childUnit.data.unitData.propertyData.GetName() + " ";
                    }
                }
                if (relationships[3].Length < 4)
                {
                    relationships[3] = "孩子：无";
                }

                // 师傅
                relationships.Add("师傅:");
                foreach (string id in unit.data.unitData.relationData.master)
                {
                    WorldUnitBase masterUnit = g.world.unit.GetUnit(id, true);
                    if (masterUnit != null)
                    {
                        relationships[4] += masterUnit.data.unitData.propertyData.GetName() + " ";
                    }
                }
                if (relationships[4].Length < 4)
                {
                    relationships[4] = "师傅：无";
                }

                // 徒弟
                relationships.Add("徒弟:");
                foreach (string id in unit.data.unitData.relationData.student)
                {
                    WorldUnitBase studentUnit = g.world.unit.GetUnit(id, true);
                    if (studentUnit != null)
                    {
                        relationships[5] += studentUnit.data.unitData.propertyData.GetName() + " ";
                    }
                }
                if (relationships[5].Length < 4)
                {
                    relationships[5] = "徒弟：无";
                }

                string relationshipsStr = string.Join(" ", relationships);

                // 6. 功法与装备
                // 气运
                List<string> luckList = new List<string>();
                foreach (WorldUnitLuckBase luck in unit.allLuck)
                {
                    
                    luckList.Add(GameTool.LS(luck.luckConf.name));
                }
                string luckStr = string.Join(" ", luckList);
                if (StringExtensions.IsEmpty(luckStr))
                {
                    luckStr = "无";
                }

                // 功法信息
                List<string> martialList = new List<string>();
                DataUnit.UnitInfoData unitData = unit.data.unitData;

                // 武技
                DataUnit.ActionMartialData actionMartial = unitData.GetActionMartial(unitData.skillLeft);
                if (actionMartial != null)
                {
                    DataProps.MartialData martialData = actionMartial.data.To<DataProps.MartialData>();
                    martialList.Add("武技为" + GameTool.LS(martialData.martialInfo.name));
                }

                // 绝技
                DataUnit.ActionMartialData actionMartial2 = unitData.GetActionMartial(unitData.skillRight);
                if (actionMartial2 != null)
                {
                    DataProps.MartialData martialData = actionMartial2.data.To<DataProps.MartialData>();
                    martialList.Add("绝技为" + GameTool.LS(martialData.martialInfo.name));
                }

                // 身法
                DataUnit.ActionMartialData actionMartial3 = unitData.GetActionMartial(unitData.step);
                if (actionMartial3 != null)
                {
                    DataProps.MartialData martialData = actionMartial3.data.To<DataProps.MartialData>();
                    martialList.Add("身法为" + GameTool.LS(martialData.martialInfo.name));
                }

                // 神通
                DataUnit.ActionMartialData actionMartial4 = unitData.GetActionMartial(unitData.ultimate);
                if (actionMartial4 != null)
                {
                    DataProps.MartialData martialData = actionMartial4.data.To<DataProps.MartialData>();
                    martialList.Add("神通为" + GameTool.LS(martialData.martialInfo.name));
                }

                // 心法
                List<string> abilities = new List<string>();
                foreach (string id in unit.data.unitData.abilitys)
                {
                    DataUnit.ActionMartialData abilityAction = unitData.GetActionMartial(id);
                    if (abilityAction != null)
                    {
                        DataProps.MartialData abilityData = abilityAction.data.To<DataProps.MartialData>();
                        abilities.Add(GameTool.LS(abilityData.martialInfo.name));
                    }
                }
                if (abilities.Count > 0)
                {
                    martialList.Add("心法:" + string.Join(" ", abilities));
                }

                string martialStr = string.Join("\n", martialList);
                if (StringExtensions.IsEmpty(martialStr))
                {
                    martialStr = "无";
                }

                // 装备
                string equipment = "";
                Il2CppStringArray equips = unit.data.unitData.equips;
                if (equips != null && equips.Count > 0)
                {
                    for (int j = 0; j < equips.Count; j++)
                    {
                        DataProps.PropsData prop = unit.data.unitData.propData.GetProps(equips[j]);
                        if (prop != null)
                        {
                            equipment += GameTool.LS(prop.propsItem.name) + " ";
                        }
                    }
                }
                if (StringExtensions.IsEmpty(equipment))
                {
                    equipment = "无";
                }

                // 道具与资源
                string items = "";
                List<DataProps.PropsData> allPropsList = new List<DataProps.PropsData>();

                // 将所有物品添加到临时列表
                foreach (DataProps.PropsData item in unit.data.unitData.propData.allProps)
                {
                    allPropsList.Add(item);
                }

                // 如果物品数量超过5个，随机选择5个
                if (allPropsList.Count > 5)
                {
                    // 随机打乱列表
                    System.Random random = new System.Random();
                    int n = allPropsList.Count;
                    while (n > 1)
                    {
                        n--;
                        int k = random.Next(n + 1);
                        DataProps.PropsData value = allPropsList[k];
                        allPropsList[k] = allPropsList[n];
                        allPropsList[n] = value;
                    }

                    // 只取前5个
                    allPropsList = allPropsList.Take(5).ToList();
                }

                // 构建物品信息字符串
                foreach (DataProps.PropsData item in allPropsList)
                {
                    items += item.propsInfoBase.name + "*" + item.propsCount.ToString() + " ";
                }

                if (StringExtensions.IsEmpty(items))
                {
                    items = "无";
                }

                // 灵石数量
                int money = unit.data.unitData.propData.GetPropsNum(10001);

                // 格式化输出最终字符串
                info.AppendLine($"姓名：{name}");
                info.AppendLine($"基本设定：{identity}修士");
                info.AppendLine($"性别：{gender}");
                info.AppendLine($"境界：{realm}");
                info.AppendLine($"当前年龄：{age}");
                info.AppendLine($"宗门（职位）：{sect}");
                info.AppendLine($"当前位置：{location}");
                info.AppendLine($"性格：{characterStr}");
                info.AppendLine($"爱好：{hobbyStr}（只是参考，除非事件类型特意提到，否则不要作为事件核心）");
                info.AppendLine($"与{toUnit.data.unitData.propertyData.GetName()}的关系：是{toUnit.data.unitData.propertyData.GetName()}的{relationship}");
                info.AppendLine($"与{toUnit.data.unitData.propertyData.GetName()}的亲密度：{intimacy}(默认最高300)");
                info.AppendLine($"近期烦恼：{troubleStr}");
                info.AppendLine($"魅力值：{beauty}（默认最高1000）");
                info.AppendLine($"战斗力：{power}");
                info.AppendLine($"当前心情：{mood}(默认最高100）");
                info.AppendLine($"当前精力：{energy}（默认最高80）");
                info.AppendLine($"婚姻情况：{marriageStatus}");
                info.AppendLine($"关系网：{relationshipsStr}");
                info.AppendLine($"当前声望：{reputation}");
                info.AppendLine($"携带气运：{luckStr} 重点观察重伤、一丝元魂、性奴等气运，是奇遇的核心影响因素");
                info.AppendLine($"携带功法：{martialStr}");
                info.AppendLine($"携带装备：{equipment}");
                info.AppendLine($"拥有道具及数量：{items}");
                info.AppendLine($"灵石数量：{money}");
                info.AppendLine($"种族：{race}");

                return info.ToString();
            }
            catch (Exception ex)
            {
                Debug.Log($"GetNPCInfoString出错: {ex.Message}\n{ex.StackTrace}");
                return $"提取NPC信息时发生错误: {ex.Message}";
            }
        }

        /// <summary>
        /// 提取NPC的个人设定信息
        /// </summary>
        /// <param name="unit">NPC单位对象</param>
        /// <returns>个人设定字符串</returns>
        public static string GetNPCPersonalSetting(WorldUnitBase unit)
        {
            if (unit == null) return "无效NPC";

            string personalSetting = "无";

            try
            {
                // 从NPC对象的objData字典中提取"unitSet"字段
                if (unit.data.unitData.objData.ContainsKey("unitSet"))
                {
                    personalSetting = unit.data.unitData.objData.GetString("unitSet");

                    // 移除可能存在的前缀
                    if (personalSetting.StartsWith("请记住你的人设："))
                    {
                        personalSetting = personalSetting.Substring("请记住你的人设：".Length);
                    }
                }
            }
            catch (Exception ex)
            {
                Debug.Log($"获取NPC个人设定时出错: {ex.Message}");
            }

            return personalSetting;
        }

        /// <summary>
        /// 提取NPC的个人经历信息
        /// </summary>
        /// <param name="unit">NPC单位对象</param>
        /// <param name="maxLogCount">最大日志条数，默认为5</param>
        /// <returns>个人经历字符串</returns>
        /// <summary>
        /// 处理特殊格式标记并移除不需要的颜色标签
        /// </summary>
        /// <param name="text">需要处理的文本</param>
        /// <param name="bgType">背景类型</param>
        /// <returns>处理后的文本</returns>
        /// <summary>
        /// 处理特殊格式标记并移除不需要的颜色标签
        /// </summary>
        /// <param name="text">需要处理的文本</param>
        /// <param name="bgType">背景类型</param>
        /// <returns>处理后的文本</returns>
        private static string HretHandler(string text, int bgType)
        {
            try
            {
                UITextHretTool.HretData hretData = (UITextHretTool.HretData)new UITextHretTool.HretData();
                int i = 0;
                int num = 0;
                string text2 = text;
                string text3 = "";
                while (i < text2.Length)
                {
                    i = text2.IndexOf("@");
                    if (i == -1)
                    {
                        break;
                    }
                    string text4 = text2.Substring(i + 1, text2.IndexOf("@", i + 1) - i - 1);
                    string[] array = text4.Split(new char[]
                    {
                '_'
                    });
                    if (array.Length < 2)
                    {
                        text2 = text2.Remove(0, i + text4.Length + 2);
                        i = 0;
                        num++;
                    }
                    else
                    {
                        string text5 = array[0];
                        string text6 = array[1];
                        UITextHretTool.HretHandlerBase hretHandler = UITextHretTool.GetHretHandler(text5);
                        hretHandler.Init(text6, bgType, hretData);
                        if (i > 0)
                        {
                            text3 += text2.Substring(0, i);
                        }
                        text2 = text2.Remove(0, i + text4.Length + 2);
                        text3 += hretHandler.GetHretText();
                        i = 0;
                        num++;
                    }
                }
                text3 += text2;
                text = text3;
                text = text.Replace("</color>", "");
                text = text.Replace("<color=#FF5A1C>", "");
                text = text.Replace("<color=#004FCA>", "");
                text = text.Replace("<color=#057600>", "");
                text = text.Replace("<color=#A100FF>", "");
                text = text.Replace("<color=#DB0000>", "");
                text = text.Replace("<color=#303030>", "");
            }
            catch (Exception ex)
            {
                Debug.Log(ex.Message);
            }
            return text;
        }

        /// <summary>
        /// 移除字符串开头和结尾的多余换行符
        /// </summary>
        /// <param name="logStr">需要处理的日志字符串</param>
        /// <returns>处理后的字符串</returns>
        private static string TextDelLineFeed(string logStr)
        {
            try
            {
                int num = 0;
                while (num < logStr.Length && logStr[num] == '\n')
                {
                    logStr = logStr.Remove(num, 1);
                    num--;
                    num++;
                }
                int num2 = logStr.Length - 1;
                while (num2 >= 0 && logStr[num2] == '\n')
                {
                    logStr = logStr.Remove(num2, 1);
                    num2--;
                }
            }
            catch (Exception ex)
            {
                Debug.Log(ex.Message);
            }
            return logStr;
        }

        /// <summary>
        /// 从日志数据中提取文本
        /// </summary>
        /// <param name="logs">日志数据数组</param>
        /// <returns>处理后的日志文本</returns>
        private static string GetLogText(DataUnitLog.LogData.Data[] logs)
        {
            string text = "";
            string result;
            try
            {
                for (int i = 0; i < logs.Length; i++)
                {
                    text = ((logs[i].id[0] != 0) ? (text + logs[i].GetLogString()) : (text + "\n"));
                }
                text = TextDelLineFeed(text);
                text = text.Replace("\n\n", "\n");
                result = HretHandler(text, 1);
            }
            catch (Exception ex)
            {
                Debug.Log(ex.Message);
                result = HretHandler(text, 1);
            }
            return result;
        }

        /// <summary>
        /// 提取NPC的个人经历信息
        /// </summary>
        /// <param name="unit">NPC单位对象</param>
        /// <param name="maxLogCount">最大日志条数，默认为5</param>
        /// <returns>个人经历字符串</returns>
        public static string GetNPCPersonalHistory(WorldUnitBase unit, int maxLogCount = 5)
        {
            if (unit == null) return "无效NPC";

            StringBuilder history = new StringBuilder();

            try
            {
                // 获取NPC的日志数据
                DataUnitLog.LogData logData = g.world.unitLog.GetLogDataSync(unit.data.unitData.unitID);

                if (logData != null && logData.allLogData.Count > 0)
                {
                    int count = 0;

                    // 从最新的日志开始遍历
                    for (int i = logData.allLogData.Count - 1; i >= 0 && count < maxLogCount; i--)
                    {
                        if (logData.allLogData[i].logs != null && logData.allLogData[i].logs.Count > 0)
                        {
                            // 计算年月
                            int month = logData.allLogData[i].month;
                            int yearOffset = (month % 12 != 0) ? 1 : 0;
                            int monthValue = (month % 12 == 0) ? 12 : month % 12;

                            // 添加时间标记
                            history.Append($"{month / 12 + yearOffset}年{monthValue}月: ");

                            // 使用GetLogText处理日志数据
                            string logText = GetLogText(logData.allLogData[i].logs.ToArray());
                            if (!string.IsNullOrEmpty(logText))
                            {
                                history.AppendLine(logText);
                                count++;
                            }
                        }
                    }
                }

                if (history.Length == 0)
                {
                    return "无记载经历";
                }
            }
            catch (Exception ex)
            {
                Debug.Log($"获取NPC经历时出错: {ex.Message}");
                return "获取经历失败";
            }

            return history.ToString().TrimEnd();
        }

        /// <summary>
        /// 获取NPC的完整信息：基本资料、个人设定和个人经历
        /// </summary>
        /// <param name="unit">NPC单位对象</param>
        /// <param name="toUnit">参照单位，默认为玩家角色</param>
        /// <param name="maxLogCount">最大经历日志条数，默认为5</param>
        /// <returns>包含NPC所有信息的格式化字符串</returns>
        public static string GetNPCCompleteInfo(WorldUnitBase unit, WorldUnitBase toUnit = null, int maxLogCount = 5)
        {
            if (unit == null) return "无效NPC";

            // 如果未提供参照单位，默认使用玩家
            if (toUnit == null)
            {
                toUnit = g.world.playerUnit;
            }

            StringBuilder info = new StringBuilder();

            try
            {
                // 获取基本信息
                string basicInfo = GetNPCInfoString(unit, toUnit);
                info.AppendLine("【基本资料】");
                info.AppendLine(basicInfo);

                // 获取个人设定
                string personalSetting = GetNPCPersonalSetting(unit);
                info.AppendLine("【个人设定】（若有与玩家的关系，需要重点体现）");
                info.AppendLine(personalSetting);

                // 获取个人经历
                string personalHistory = GetNPCPersonalHistory(unit, maxLogCount);
                info.AppendLine("【个人经历】（若有与玩家的经历，需要重点体现）");
                info.AppendLine(personalHistory);
            }
            catch (Exception ex)
            {
                Debug.Log($"获取NPC完整信息时出错: {ex.Message}");
                return $"获取NPC信息失败: {ex.Message}";
            }

            return info.ToString();
        }

        public static string GetPlayerCompleteInfo(WorldUnitBase unit, WorldUnitBase toUnit = null, int maxLogCount = 5)
        {
            if (unit == null) return "无效NPC";

            // 如果未提供参照单位，默认使用玩家
            if (toUnit == null)
            {
                toUnit = g.world.playerUnit;
            }

            StringBuilder info = new StringBuilder();

            try
            {
                // 获取基本信息
                string basicInfo = GetNPCInfoString(unit, toUnit);
                info.AppendLine("【基本资料】");
                info.AppendLine(basicInfo);

                // 获取个人经历
                string personalHistory = GetNPCPersonalHistory(unit, maxLogCount);
                info.AppendLine("【个人经历】");
                info.AppendLine(personalHistory);
            }
            catch (Exception ex)
            {
                Debug.Log($"获取NPC完整信息时出错: {ex.Message}");
                return $"获取NPC信息失败: {ex.Message}";
            }

            return info.ToString();
        }
    }
}